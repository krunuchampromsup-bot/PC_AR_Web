<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hardware Quiz - T.Nuch SmartCom</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;500;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root { --neon: #00f2ff; --pink: #ff00cc; --success: #2ecc71; --error: #e74c3c; }
        body { font-family: 'Prompt', sans-serif; background: #050a14; color: white; text-align: center; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: 20px auto; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 20px; border: 1px solid var(--neon); box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); }
        input { padding: 12px; border-radius: 10px; border: 1px solid var(--neon); width: 80%; margin: 10px 0; background: #0a1a33; color: white; font-family: 'Prompt'; font-size: 1rem; }
        .btn { padding: 15px 30px; background: var(--neon); color: #000; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; font-size: 1.1rem; margin: 10px; transition: 0.3s; }
        .choice-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; background: rgba(255,255,255,0.1); border: 1px solid var(--neon); color: white; border-radius: 15px; cursor: pointer; text-align: left; font-size: 1.1rem; transition: 0.2s; }
        .choice-btn.correct { background: var(--success) !important; color: white; border-color: var(--success); }
        .choice-btn.wrong { background: var(--error) !important; color: white; border-color: var(--error); }
        #timer { font-size: 1.5rem; color: var(--pink); font-weight: bold; margin-bottom: 10px; }
        .hidden { display: none; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: rgba(0,0,0,0.2); }
        th, td { padding: 12px; border-bottom: 1px solid rgba(0, 242, 255, 0.1); text-align: center; }
        th { background: rgba(0, 242, 255, 0.2); color: var(--neon); }
        .warning-text { color: var(--pink); font-weight: bold; margin-bottom: 15px; border: 1px dashed var(--pink); padding: 10px; border-radius: 10px; }
    </style>
</head>
<body>

    <audio id="snd-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="snd-wrong" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>
    <audio id="snd-finish" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>

    <div class="container" id="setup-screen">
        <h2 style="color: var(--neon)">üéÆ Hardware Quiz Game</h2>
        <div id="setup-content">
            <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö (‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° 10 ‡∏Ç‡πâ‡∏≠)</p>
            <input type="text" id="player-name" placeholder="‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...">
            <br>
            <button class="btn" onclick="startQuiz()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏ö‡∏ó‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
        </div>
    </div>

    <div class="container hidden" id="already-done-screen">
        <h2 style="color: var(--pink)">‚ö†Ô∏è ‡∏û‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</h2>
        <p>‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö</p>
        <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á <b>1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</b> ‡∏ï‡πà‡∏≠‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
        <hr style="border: 0.5px solid var(--neon); margin: 20px 0;">
        <button class="btn" onclick="showLeaderboardOnly()">‡∏î‡∏π‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</button>
    </div>

    <div class="container hidden" id="quiz-screen">
        <div id="timer">‡πÄ‡∏ß‡∏•‡∏≤: 0 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
        <h3 id="question-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...</h3>
        <div id="choices-container"></div>
        <p>‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà <span id="current-pos">1</span> / 10</p>
    </div>

    <div class="container hidden" id="result-screen">
        <h2 id="result-header" style="color: var(--neon);">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢!</h2>
        <p id="final-score" style="font-size: 1.2rem;"></p>
        <p id="final-time"></p>
        <h3 style="color: var(--pink); margin-top: 30px;">üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
        <table>
            <thead><tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th><th>‡πÄ‡∏ß‡∏•‡∏≤</th></tr></thead>
            <tbody id="leaderboard-body"></tbody>
        </table>
        <p style="margin-top: 20px; font-size: 0.8rem; color: #888;">* ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</p>
    </div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAK5UMFATyhnQlq3EDLmG7agFqTKh0BYCM",
        authDomain: "smartcom-ar-quiz.firebaseapp.com",
        projectId: "smartcom-ar-quiz",
        storageBucket: "smartcom-ar-quiz.appspot.com",
        messagingSenderId: "367243958931", 
        appId: "1:367243958931:web:3e3c66f54668b8ec66b8ec" 
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏¢‡∏™‡∏≠‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
    window.onload = function() {
        if (localStorage.getItem("hardware_quiz_done") === "true") {
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('already-done-screen').classList.remove('hidden');
        }
    };

    const rawQuestions = [
        { q: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏î‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô '‡∏™‡∏°‡∏≠‡∏á' ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå?", c: ["RAM", "CPU", "SSD"], a: "CPU" },
        { q: "‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠?", c: ["SSD", "PSU", "Mainboard"], a: "SSD" },
        { q: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏î‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏Ç‡∏ì‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô?", c: ["SSD", "CPU", "RAM"], a: "RAM" },
        { q: "‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ô‡∏µ‡πâ ‡∏à‡∏∞‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏ü‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ?", c: ["CASE", "PSU", "RAM"], a: "PSU" },
        { q: "‡πÅ‡∏ú‡∏á‡∏ß‡∏á‡∏à‡∏£‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠?", c: ["Mainboard", "SSD", "CPU"], a: "Mainboard" },
        { q: "‡∏ï‡∏±‡∏ß‡∏ñ‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ù‡∏∏‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤?", c: ["PSU", "Mainboard", "CASE"], a: "CASE" },
        { q: "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏≠‡∏á CPU ‡∏°‡∏µ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ß‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£?", c: ["Watt", "GHz", "GB"], a: "GHz" },
        { q: "RAM ‡∏¢‡πà‡∏≠‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?", c: ["Read Access Memory", "Random Access Memory", "Real Action Memory"], a: "Random Access Memory" },
        { q: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÅ‡∏£‡∏á‡∏Å‡∏£‡∏∞‡πÅ‡∏ó‡∏Å‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤?", c: ["Hard Disk", "SSD", "CD-ROM"], a: "SSD" },
        { q: "Socket ‡∏ö‡∏ô‡πÄ‡∏°‡∏ô‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏°‡∏µ‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏™‡πà‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏î?", c: ["CPU", "Power Cable", "Case Fan"], a: "CPU" }
    ];

    let questions = []; let currentQ = 0; let score = 0; let seconds = 0; let timerInterval; let isAnswering = false;

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function startQuiz() {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ã‡πâ‡∏≥‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ß‡∏£‡πå
        if (localStorage.getItem("hardware_quiz_done") === "true") {
            alert("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö");
            return;
        }

        const name = document.getElementById('player-name').value;
        if(!name) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö");
        
        questions = shuffle([...rawQuestions]).slice(0, 10);
        questions.forEach(item => { item.c = shuffle([...item.c]); });
        
        document.getElementById('setup-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        
        timerInterval = setInterval(() => { 
            seconds++; 
            document.getElementById('timer').innerText = `‡πÄ‡∏ß‡∏•‡∏≤: ${seconds} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`; 
        }, 1000);
        showQuestion();
    }

    function showQuestion() {
        isAnswering = false;
        const qData = questions[currentQ];
        document.getElementById('question-text').innerText = qData.q;
        document.getElementById('current-pos').innerText = currentQ + 1;
        const container = document.getElementById('choices-container');
        container.innerHTML = "";
        qData.c.forEach((choice) => {
            const btn = document.createElement('button');
            btn.className = "choice-btn"; btn.innerText = choice;
            btn.onclick = () => checkAnswer(choice, btn);
            container.appendChild(btn);
        });
    }

    function checkAnswer(userChoice, selectedBtn) {
        if(isAnswering) return; isAnswering = true;
        const qData = questions[currentQ];
        const allBtns = document.querySelectorAll('.choice-btn');
        if(userChoice === qData.a) {
            score++; selectedBtn.classList.add('correct');
            document.getElementById('snd-correct').play().catch(e => {});
        } else {
            selectedBtn.classList.add('wrong');
            allBtns.forEach(btn => { if(btn.innerText === qData.a) btn.classList.add('correct'); });
            document.getElementById('snd-wrong').play().catch(e => {});
        }
        setTimeout(() => {
            currentQ++;
            if(currentQ < questions.length) showQuestion();
            else finishGame();
        }, 800);
    }

    function finishGame() {
        clearInterval(timerInterval);
        document.getElementById('snd-finish').play().catch(e => {});
        const name = document.getElementById('player-name').value;
        
        // ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏£‡∏∞‡∏ö‡∏ö Firebase
        database.ref('scores/').push({ name, score, time: seconds, timestamp: Date.now() });

        // ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
        localStorage.setItem("hardware_quiz_done", "true");
        localStorage.setItem("my_last_score", score);
        localStorage.setItem("my_last_time", seconds);

        showResultView(name, score, seconds);
    }

    function showResultView(name, s, t) {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('final-score').innerText = `‡∏Ñ‡∏∏‡∏ì ${name} ‡∏ó‡∏≥‡πÑ‡∏î‡πâ: ${s} / 10 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`;
        document.getElementById('final-time').innerText = `‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤: ${t} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
        loadLeaderboard();
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏¢‡∏≤‡∏Å‡∏î‡∏π‡πÅ‡∏Ñ‡πà‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
    function showLeaderboardOnly() {
        document.getElementById('already-done-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('result-header').innerText = "‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô";
        
        const s = localStorage.getItem("my_last_score") || "-";
        const t = localStorage.getItem("my_last_time") || "-";
        document.getElementById('final-score').innerText = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: ${s} / 10`;
        document.getElementById('final-time').innerText = `‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏ó‡∏≥‡πÑ‡∏î‡πâ: ${t} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
        loadLeaderboard();
    }

    function loadLeaderboard() {
        database.ref('scores/').orderByChild('score').limitToLast(10).on('value', (snapshot) => {
            const list = []; snapshot.forEach((child) => { list.push(child.val()); });
            list.reverse();
            document.getElementById('leaderboard-body').innerHTML = list.map(i => `<tr><td>${i.name}</td><td>${i.score}</td><td>${i.time}</td></tr>`).join('');
        });
    }
</script>
</body>
</html>
