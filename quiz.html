<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hardware Quiz - T.Nuch SmartCom</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root { 
            --neon: #00f2ff; 
            --pink: #ff00cc; 
            --success: #2ecc71; 
            --error: #e74c3c; 
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(0, 242, 255, 0.3);
        }
        body { font-family: 'Prompt', sans-serif; background: #050a14; color: white; text-align: center; margin: 0; padding: 20px; min-height: 100vh; overflow-x: hidden; }
        .container { max-width: 600px; margin: 20px auto; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 20px; border: 1px solid var(--neon); box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); position: relative; }
        
        /* HP Bar Styles */
        .status-container { margin-bottom: 20px; padding: 15px; background: var(--glass); border-radius: 15px; border: 1px solid var(--border); transition: 0.3s; }
        #hp-bar { width: 100%; height: 15px; background: linear-gradient(90deg, var(--neon), var(--pink)); transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .hp-bg { width: 100%; height: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; border: 1px solid rgba(0,242,255,0.2); }
        
        input { padding: 12px; border-radius: 10px; border: 1px solid var(--neon); width: 80%; margin: 10px 0; background: #0a1a33; color: white; font-family: 'Prompt'; font-size: 1rem; outline: none; }
        .btn { padding: 15px 30px; background: var(--neon); color: #000; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; font-size: 1.1rem; margin: 10px; transition: 0.3s; box-shadow: 0 0 10px var(--neon); }
        .btn:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--neon); }
        
        .choice-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; background: rgba(255,255,255,0.05); border: 1px solid var(--neon); color: white; border-radius: 15px; cursor: pointer; text-align: left; font-size: 1.1rem; transition: 0.2s; }
        .choice-btn:hover { background: rgba(0, 242, 255, 0.1); }
        .choice-btn.correct { background: var(--success) !important; color: white; border-color: var(--success); }
        .choice-btn.wrong { background: var(--error) !important; color: white; border-color: var(--error); }
        
        #timer { font-size: 1.2rem; color: var(--neon); font-weight: bold; margin-bottom: 10px; }
        .hidden { display: none; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; border-bottom: 1px solid rgba(0, 242, 255, 0.1); text-align: center; }
        
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        
        .mode-badge { display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; margin-bottom: 10px; font-weight: bold; }
        .pre-test-badge { background: #f39c12; color: #000; }
        .game-badge { background: var(--pink); color: #fff; }
        
        .music-ctrl { position: fixed; top: 10px; right: 10px; z-index: 100; background: rgba(0,0,0,0.5); padding: 8px 15px; border-radius: 30px; border: 1px solid var(--neon); cursor: pointer; color: var(--neon); font-size: 0.8rem; }
    </style>
</head>
<body>

    <audio id="snd-correct" src="https://actions.google.com/sounds/v1/cartoon/clink_vibrant.ogg" preload="auto"></audio>
    <audio id="snd-wrong" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>
    <audio id="snd-gameover" src="https://actions.google.com/sounds/v1/horror/lose_fbc.ogg" preload="auto"></audio>
    <audio id="snd-finish" src="https://actions.google.com/sounds/v1/human_voices/applause.ogg" preload="auto"></audio>
    <audio id="bg-music" src="https://actions.google.com/sounds/v1/science_fiction/techno_logic.ogg" loop></audio>

    <div class="music-ctrl" onclick="toggleMusic()">
        <i id="music-icon" class="fas fa-volume-mute"></i> ‡∏î‡∏ô‡∏ï‡∏£‡∏µ Sci-Fi
    </div>

    <div class="container" id="setup-screen">
        <h2 style="color: var(--neon)">üéÆ Smart Hardware Quiz</h2>
        <div style="background: var(--glass); padding: 20px; border-radius: 15px; border: 1px dashed var(--neon); margin-bottom: 20px;">
            <p><strong>‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô:</strong></p>
            <ul style="text-align: left; font-size: 0.9rem;">
                <li>‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö 5 ‡∏Ç‡πâ‡∏≠ (Pre-test)</li>
                <li>‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î Game 10 ‡∏Ç‡πâ‡∏≠</li>
                <li>‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î Game ‡∏û‡∏•‡∏±‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (HP) ‡∏à‡∏∞‡∏•‡∏î‡∏•‡∏á!</li>
            </ul>
        </div>
        <input type="text" id="player-name" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...">
        <br>
        <button class="btn" onclick="checkHistoryAndStart()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</button>
    </div>

    <div class="container hidden" id="already-done-screen">
        <h2 style="color: var(--pink)">‚ö†Ô∏è ‡∏û‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>
        <p>‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö</p>
        <button class="btn" onclick="showLeaderboardOnly()">‡∏î‡∏π‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>
    </div>

    <div class="container hidden" id="quiz-screen">
        <div class="status-container" id="hp-container">
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span id="mode-label" class="mode-badge pre-test-badge">PRE-TEST MODE</span>
                <span id="hp-text" style="color: var(--neon); font-weight: bold;">100%</span>
            </div>
            <div class="hp-bg">
                <div id="hp-bar"></div>
            </div>
        </div>

        <div id="timer">‡πÄ‡∏ß‡∏•‡∏≤: 0 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
        <h3 id="question-text" style="min-height: 60px;">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...</h3>
        <div id="choices-container"></div>
        <p style="font-size: 0.9rem; opacity: 0.7; margin-top: 20px;">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà <span id="current-pos">1</span> / <span id="total-pos">5</span></p>
    </div>

    <div class="container hidden" id="result-screen">
        <h2 id="result-header" style="color: var(--neon);">‡∏à‡∏ö‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à!</h2>
        <p id="final-score" style="font-size: 1.4rem; font-weight: bold;"></p>
        <p id="final-time"></p>
        <hr style="border: 0.5px solid var(--border); margin: 20px 0;">
        <h3 style="color: var(--pink);">üèÜ Top 10 Leaderboard</h3>
        <table>
            <thead><tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th><th>‡πÄ‡∏ß‡∏•‡∏≤</th></tr></thead>
            <tbody id="leaderboard-body"></tbody>
        </table>
        <button class="btn" style="margin-top: 20px; font-size: 0.9rem;" onclick="location.reload()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>

<script>
    // --- 1. Firebase Config (‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ) ---
    const firebaseConfig = {
        apiKey: "AIzaSyAK5UMFATyhnQlq3EDLmG7agFqTKh0BYCM",
        authDomain: "smartcom-ar-quiz.firebaseapp.com",
        projectId: "smartcom-ar-quiz",
        databaseURL: "https://smartcom-ar-quiz-default-rtdb.firebaseio.com/", 
        storageBucket: "smartcom-ar-quiz.appspot.com",
        messagingSenderId: "367243958931",
        appId: "1:367243958931:web:3e3c66f54668b8ec66b8ec"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // --- 2. Data & Variables ---
    const rawQuestions = [
        { q: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏î‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô '‡∏™‡∏°‡∏≠‡∏á' ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå?", c: ["RAM", "CPU", "SSD"], a: "CPU" },
        { q: "‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠?", c: ["SSD", "PSU", "Mainboard"], a: "SSD" },
        { q: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏î‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏Ç‡∏ì‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô?", c: ["SSD", "CPU", "RAM"], a: "RAM" },
        { q: "‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ô‡∏µ‡πâ ‡∏à‡∏∞‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏ü‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ?", c: ["CASE", "PSU", "RAM"], a: "PSU" },
        { q: "‡πÅ‡∏ú‡∏á‡∏ß‡∏á‡∏à‡∏£‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠?", c: ["Mainboard", "SSD", "CPU"], a: "Mainboard" },
        { q: "‡∏ï‡∏±‡∏ß‡∏ñ‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ù‡∏∏‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤?", c: ["PSU", "Mainboard", "CASE"], a: "CASE" },
        { q: "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏≠‡∏á CPU ‡∏°‡∏µ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ß‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£?", c: ["Watt", "GHz", "GB"], a: "GHz" },
        { q: "RAM ‡∏¢‡πà‡∏≠‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?", c: ["Read Access Memory", "Random Access Memory", "Real Action Memory"], a: "Random Access Memory" },
        { q: "Socket ‡∏ö‡∏ô‡πÄ‡∏°‡∏ô‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏°‡∏µ‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏™‡πà‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏î?", c: ["CPU", "Power Cable", "Case Fan"], a: "CPU" },
        { q: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏î‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏†‡∏≤‡∏û‡∏≠‡∏≠‡∏Å‡∏ó‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠?", c: ["VGA Card", "Sound Card", "Network Card"], a: "VGA Card" }
    ];

    let questions = []; 
    let currentQ = 0; 
    let score = 0; 
    let seconds = 0; 
    let timerInterval; 
    let isAnswering = false;
    let currentHP = 100;
    let isGameMode = false;
    let isMusicPlaying = false;

    const bgMusic = document.getElementById('bg-music');
    bgMusic.volume = 0.2;

    // --- 3. Functions ---
    function toggleMusic() {
        const icon = document.getElementById('music-icon');
        if (isMusicPlaying) {
            bgMusic.pause();
            icon.className = "fas fa-volume-mute";
        } else {
            bgMusic.play();
            icon.className = "fas fa-volume-up";
        }
        isMusicPlaying = !isMusicPlaying;
    }

    function checkHistoryAndStart() {
        if (localStorage.getItem("hardware_quiz_done") === "true") {
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('already-done-screen').classList.remove('hidden');
        } else {
            startPreTest();
        }
    }

   function startPreTest() {
    const name = document.getElementById('player-name').value;
    if(!name) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ñ‡∏£‡∏±‡∏ö");

    // ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°
    bgMusic.play().then(() => {
        isMusicPlaying = true;
        document.getElementById('music-icon').className = "fas fa-volume-up";
    }).catch(e => console.log("‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ"));

    questions = shuffle([...rawQuestions]).slice(0, 5);
    questions.forEach(item => { item.c = shuffle([...item.c]); });
    
    document.getElementById('setup-screen').classList.add('hidden');
    document.getElementById('quiz-screen').classList.remove('hidden');
    
    showQuestion();
}

    function startGameReal() {
        alert("‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô Pre-test ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô Game Mode 10 ‡∏Ç‡πâ‡∏≠ (‡∏£‡∏∞‡∏ß‡∏±‡∏á HP ‡∏ô‡∏∞!)");
        isGameMode = true;
        currentQ = 0; score = 0; seconds = 0; currentHP = 100;
        
        questions = shuffle([...rawQuestions]);
        questions.forEach(item => { item.c = shuffle([...item.c]); });
        
        document.getElementById('total-pos').innerText = "10";
        document.getElementById('mode-label').innerText = "GAME MODE (RANKED)";
        document.getElementById('mode-label').className = "mode-badge game-badge";
        
        updateHPDisplay();
        timerInterval = setInterval(() => { 
            seconds++; 
            document.getElementById('timer').innerText = `‡πÄ‡∏ß‡∏•‡∏≤: ${seconds} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`; 
        }, 1000);
        showQuestion();
    }

    function showQuestion() {
        isAnswering = false;
        const qData = questions[currentQ];
        document.getElementById('question-text').innerText = qData.q;
        document.getElementById('current-pos').innerText = currentQ + 1;
        const container = document.getElementById('choices-container');
        container.innerHTML = "";
        qData.c.forEach((choice) => {
            const btn = document.createElement('button');
            btn.className = "choice-btn"; btn.innerText = choice;
            btn.onclick = () => checkAnswer(choice, btn);
            container.appendChild(btn);
        });
    }

    function checkAnswer(userChoice, selectedBtn) {
        if(isAnswering) return; isAnswering = true;
        const qData = questions[currentQ];
        const allBtns = document.querySelectorAll('.choice-btn');
        
        if(userChoice === qData.a) {
            score++; 
            selectedBtn.classList.add('correct');
            document.getElementById('snd-correct').play().catch(e => {});
        } else {
            selectedBtn.classList.add('wrong');
            allBtns.forEach(btn => { if(btn.innerText === qData.a) btn.classList.add('correct'); });
            document.getElementById('snd-wrong').play().catch(e => {});
            
            if(isGameMode) {
                currentHP -= 20;
                if(currentHP < 0) currentHP = 0;
                updateHPDisplay();
                document.getElementById('hp-container').classList.add('shake');
                setTimeout(() => document.getElementById('hp-container').classList.remove('shake'), 500);
            }
        }

        setTimeout(() => {
            if(isGameMode && currentHP <= 0) { gameOver(); return; }
            currentQ++;
            if(currentQ < questions.length) showQuestion();
            else {
                if(!isGameMode) startGameReal();
                else finishGame();
            }
        }, 800);
    }

    function updateHPDisplay() {
        const hpBar = document.getElementById('hp-bar');
        hpBar.style.width = currentHP + "%";
        document.getElementById('hp-text').innerText = currentHP + "%";
        if (currentHP <= 40) hpBar.style.background = "#ff416c";
    }

    function gameOver() {
        clearInterval(timerInterval);
        document.getElementById('snd-gameover').play().catch(e => {});
        alert("GAME OVER! ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏ö‡∏¥‡∏ô");
        location.reload();
    }

    function finishGame() {
        clearInterval(timerInterval);
        document.getElementById('snd-finish').play().catch(e => {});
        const name = document.getElementById('player-name').value;
        
        database.ref('scores/').push({ name, score, time: seconds, timestamp: Date.now() });
        localStorage.setItem("hardware_quiz_done", "true");

        showResultView(name, score, seconds);
    }

    function showResultView(name, s, t) {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('final-score').innerText = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: ${s} / 10`;
        document.getElementById('final-time').innerText = `‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ: ${t} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
        loadLeaderboard();
    }

    function loadLeaderboard() {
        database.ref('scores/').orderByChild('score').limitToLast(10).on('value', (snapshot) => {
            const list = []; snapshot.forEach((child) => { list.push(child.val()); });
            list.reverse();
            document.getElementById('leaderboard-body').innerHTML = list.map(i => `<tr><td>${i.name}</td><td>${i.score}</td><td>${i.time}</td></tr>`).join('');
        });
    }

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function showLeaderboardOnly() {
        document.getElementById('already-done-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('result-header').innerText = "‡∏ó‡∏≥‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß";
        loadLeaderboard();
    }
</script>
</body>
</html>
